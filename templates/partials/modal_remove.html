{% load static %}
<div class="modal" id="removeModal">
  <div class="modal-box">
    <form id="form-remove" method="POST" action="">
      {% csrf_token %}

      <div class="modal-header">
        <p class="modal-title">Remover Instituição</p>
        <button type="button" class="close-button" id="removeModalCloseBtn">
          <img src="{% static 'icons/cancel.svg' %}" alt="Fechar">
        </button>
      </div>

      <div class="modal-body">
        <p class="confirm-text">
          Deseja realmente excluir a instituição <span id="remove-nome" style="font-weight:700;">{{ company_name }}</span>?
        </p>
      </div>

      <div class="modal-footer">
        <button type="button" class="filter-button cancel-button" id="removeModalCancelBtn">
          Cancelar
        </button>
        <button type="submit" class="filter-button apply-button">
          Confirmar
        </button>
      </div>
    </form>
  </div>
</div>

<script>
(() => {
  const modal = document.getElementById('removeModal');
  const form  = document.getElementById('form-remove');
  const nome  = document.getElementById('remove-nome');

  function open(instId, instNome = '') {
    // if (form && instId) form.action = `/instituicoes/${instId}/remover/`;
    nome.textContent = instNome || '—';
    modal.classList.add('active');
  }

  function close() {
    modal.classList.remove('active');
  }

  window.openRemoveModal = open;

  // close for buttons and outside click
  document.getElementById('removeModalCloseBtn')?.addEventListener('click', close);
  document.getElementById('removeModalCancelBtn')?.addEventListener('click', close);
  modal.addEventListener('mousedown', (e) => { if (e.target === modal) close(); });
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('active')) close();
  });
})();
</script>
